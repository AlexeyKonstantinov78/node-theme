# ОСНОВЫ NODE.JS

## Файловая система

***Полезные ссылки***

[Node.js: работа с файловой системой (ENG)](https://2ality.com/2022/06/nodejs-file-system.html)<br>
[Node.js: работа с файловой системой (RUS)](https://habr.com/ru/companies/timeweb/articles/678792/)<br>
[Читаем файл построчно](https://nodejs.guide/read-file/)<br>
[Шпаргалка по модулю fs](https://my-js.org/docs/cheatsheet/fs/)<br>

## Задание

    Задание №1

Напишите программу для копирования папки

Функция принимает 3 параметра:<br>
1. sourceDir (строка) - путь к исходной директории, содержимое которой нужно скопировать.
2. targetDir (строка) - путь к целевой директории, в которую нужно скопировать содержимое исходной директории.
3. callback (функция) - функция обратного вызова, которая будет вызвана после завершения копирования. Коллбэк должен принимать один аргумент - ошибку (если есть), или null, если операция прошла успешно.

Важно:<br>
* Необходимо использовать рекурсивные вызовы для обхода содержимого исходной директории.
* Если в исходной директории обнаружена поддиректория, создайте соответствующую поддиректорию в целевой директории.
* Если в исходной директории обнаружен файл, скопируйте его в целевую директорию

Для проверки создайте директорию в которой будут пару папок внутри с разными типами и именами файлов
Обязательно проверьте копирование для файлов размером 5 - 10 Мегабайт


    Задание №2

Напишите класс Logger для логирования

constructor(filename, maxSize): Конструктор класса. Принимает два аргумента:

filename (строка) - имя файла лога, в который будут записываться сообщения.
maxSize (число) - максимальный размер файла лога в байтах.

Логи записываются в начало и обрезаются с конца, когда файл превышает maxSize.

В конструктор инициализируем поля объекта:
* имя файла(filename)
* максимальный размер(maxSize)
* очередь логов(logQueue - array)
* флаг записи(writing - boolean)

Определите методы:

* log(message): добавляет сообщение в начало logQueue и вызывает метод writeLog, если запись в файл в данный момент не выполняется, устанавливает флаг writing в значение true.
* writeLog(): Записывает файл лога из массива logQueue и очищает его. Генерирует событие 'messageLogged'. Вызывает метод проверки размера файла checkFileSize.
Если в массиве logQueue есть еще сообщения лога, рекурсивно вызывает метод writeLog.
Если в массиве logQueue больше нет сообщений лога, устанавливает флаг writing в значение false.
* getFileSize(): с помощью fs.stat получает информацию о размере файла и возвращает его размер в байтах. Если возникает ошибка при получении информации о файле, возвращает 0.
* checkFileSize(): Если текущий размер файла превышает максимальный размер, вызывает метод rotateLog для выполнения ротации лога.
* rotateLog(): Создает резервную копию файла с расширением .bak (копируя текущий лог-файл), затем обрезает текущий лог-файл с помощью метода fs.truncate
